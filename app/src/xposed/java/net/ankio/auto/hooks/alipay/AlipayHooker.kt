/*
 * Copyright (C) 2023 ankio(ankio@ankio.net)
 * Licensed under the Apache License, Version 3.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-3.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *   limitations under the License.
 */

package net.ankio.auto.hooks.alipay

import android.content.Context
import net.ankio.auto.api.Hooker
import net.ankio.auto.api.PartHooker
import net.ankio.auto.hooks.alipay.hooks.MessageBoxHooker
import net.ankio.auto.hooks.alipay.hooks.RedPackageHooker
import net.ankio.auto.hooks.alipay.hooks.SettingUIHooker

class AlipayHooker:Hooker() {
    override val packPageName: String = "com.eg.android.AlipayGphone"
    override val appName: String = "支付宝"
    override val needHelpFindApplication: Boolean = true
    override var partHookers: MutableList<PartHooker> = arrayListOf(
        SettingUIHooker(this),//支付宝设置
        MessageBoxHooker(this),//支付消息盒子
        RedPackageHooker(this),//支付宝红包
    )

    override fun hookLoadPackage(classLoader: ClassLoader?, context: Context?) {

          hookUtils.analyzeData(
                net.ankio.auto.constant.DataType.App.type,
                packPageName,
                "{\"mk\":231260152230200009,\"st\":1,\"isSc\":0,\"appId\":\"\",\"mct\":1703056950000,\"pl\":\"{\\\"templateType\\\":\\\"S\\\",\\\"commandType\\\":\\\"SEND\\\",\\\"expireLink\\\":\\\"https:\\/\\/render.alipay.com\\/p\\/f\\/fd-jblxfp45\\/pages\\/home\\/index.html\\\",\\\"withPushNfc\\\":\\\"N\\\",\\\"msgType\\\":\\\"NOTICE\\\",\\\"appInfo\\\":\\\"{\\\\\\\"appName\\\\\\\":\\\\\\\"支付宝商家服务\\\\\\\",\\\\\\\"appId\\\\\\\":\\\\\\\"2021002117633826\\\\\\\",\\\\\\\"linkUrl\\\\\\\":\\\\\\\"alipays:\\/\\/platformapi\\/startApp?appId=2021002117633826\\\\\\\",\\\\\\\"msgListConfig\\\\\\\":\\\\\\\"0\\\\\\\",\\\\\\\"logoUrl\\\\\\\":\\\\\\\"https:\\/\\/appstoreisvpic.alipayobjects.com\\/prod\\/9332f60a-5e22-4504-9601-a4d434945b1f.png\\\\\\\"}\\\",\\\"icon\\\":\\\"https:\\/\\/appstoreisvpic.alipayobjects.com\\/prod\\/9332f60a-5e22-4504-9601-a4d434945b1f.png\\\",\\\"link\\\":\\\"alipays:\\/\\/platformapi\\/startapp?appId=60000081\\\",\\\"msgId\\\":\\\"ff175689e251456149b7942b76c4c62100972\\\",\\\"templateCode\\\":\\\"pep_MDailyBill_top_Push\\\",\\\"templateId\\\":\\\"WALLET-FWC@remindDefaultText\\\",\\\"title\\\":\\\"支付宝商家服务\\\",\\\"content\\\":\\\"收款金额￥0.01\\\",\\\"linkName\\\":\\\"查看该笔收款详情\\\",\\\"bizName\\\":\\\"支付宝商家服务\\\",\\\"appId\\\":\\\"2021002117633826\\\",\\\"msgCategory\\\":\\\"bill\\\",\\\"assistInfo\\\":\\\"{\\\\\\\"assistId\\\\\\\":\\\\\\\"merchant_aissit\\\\\\\",\\\\\\\"desc\\\\\\\":\\\\\\\"支付宝收款变动通知\\\\\\\",\\\\\\\"hiddenMsgHeader\\\\\\\":false,\\\\\\\"icon\\\\\\\":\\\\\\\"https:\\/\\/gw.alipayobjects.com\\/mdn\\/rms_f96971\\/afts\\/img\\/A*z-kdS4Z_SJYAAAAAAAAAAABkARQnAQ\\\\\\\",\\\\\\\"reminderType\\\\\\\":\\\\\\\"point\\\\\\\",\\\\\\\"reminderTypeModifyEnable\\\\\\\":false,\\\\\\\"showInFriendTab\\\\\\\":false,\\\\\\\"title\\\\\\\":\\\\\\\"收款助手\\\\\\\"}\\\",\\\"subscribeMsg\\\":false,\\\"ih\\\":\\\"{\\\\\\\"extInfo\\\\\\\":{},\\\\\\\"iid\\\\\\\":\\\\\\\"105\\\\\\\",\\\\\\\"ioty\\\\\\\":\\\\\\\"aor\\\\\\\",\\\\\\\"itemBasicInfo\\\\\\\":{\\\\\\\"dn\\\\\\\":\\\\\\\"服务提醒\\\\\\\",\\\\\\\"ic\\\\\\\":\\\\\\\"https:\\/\\/gw.alipayobjects.com\\/zos\\/bmw-prod\\/b96c31e0-64ba-4cbb-9a64-73ff17d701fd.webp\\\\\\\",\\\\\\\"lk\\\\\\\":\\\\\\\"alipays:\\/\\/platformapi\\/startapp?appId=20000235&source=friendTab\\\\\\\"},\\\\\\\"itemUserRelation\\\\\\\":{\\\\\\\"ilf\\\\\\\":\\\\\\\"N\\\\\\\",\\\\\\\"uc\\\\\\\":{\\\\\\\"top\\\\\\\":\\\\\\\"0\\\\\\\",\\\\\\\"ic\\\\\\\":\\\\\\\"0\\\\\\\"},\\\\\\\"version\\\\\\\":0},\\\\\\\"ity\\\\\\\":\\\\\\\"105\\\\\\\",\\\\\\\"moty\\\\\\\":\\\\\\\"a\\\\\\\",\\\\\\\"msgInfo\\\\\\\":{\\\\\\\"bm\\\\\\\":\\\\\\\"￥0.01收款到账通知，领积分兑好礼\\\\\\\",\\\\\\\"cmid\\\\\\\":\\\\\\\"ff175689e251456149b7942b76c4c62100972\\\\\\\",\\\\\\\"lmt\\\\\\\":1703056950113,\\\\\\\"msrid\\\\\\\":\\\\\\\"pep_MDailyBill_top_Push\\\\\\\",\\\\\\\"ncs\\\\\\\":\\\\\\\"N\\\\\\\",\\\\\\\"rps\\\\\\\":\\\\\\\"num\\\\\\\",\\\\\\\"sam\\\\\\\":\\\\\\\"Y\\\\\\\",\\\\\\\"sn\\\\\\\":\\\\\\\"支付宝商家服务\\\\\\\",\\\\\\\"urn\\\\\\\":1}}\\\",\\\"bizMonitor\\\":\\\"{\\\\\\\"isFollow\\\\\\\":false,\\\\\\\"serviceCode\\\\\\\":\\\\\\\"pep_MDailyBill_top_Push\\\\\\\",\\\\\\\"bizName\\\\\\\":\\\\\\\"支付宝商家服务\\\\\\\",\\\\\\\"createTime\\\\\\\":1703056950296,\\\\\\\"targetDataId\\\\\\\":\\\\\\\"MG6dc818a39d284d4b84e3d142d7b4945d_5\\\\\\\",\\\\\\\"appId\\\\\\\":\\\\\\\"2021002117633826\\\\\\\",\\\\\\\"messageId\\\\\\\":\\\\\\\"ff175689e251456149b7942b76c4c62100972\\\\\\\",\\\\\\\"messageTitle\\\\\\\":\\\\\\\"支付宝商家服务\\\\\\\",\\\\\\\"templateId\\\\\\\":\\\\\\\"WALLET-FWC@remindDefaultText\\\\\\\"}\\\",\\\"subscribeConfig\\\":\\\"1\\\",\\\"gmtCreate\\\":1703056950113,\\\"gmtValid\\\":2018676150113,\\\"operate\\\":\\\"SEND\\\",\\\"templateName\\\":\\\"商家服务收款到账\\\",\\\"homePageTitle\\\":\\\"￥0.01收款到账通知，领积分兑好礼\\\",\\\"attributes\\\":\\\"0000000000000001\\\",\\\"extraInfo\\\":\\\"{\\\\\\\"hiddenSumFlag\\\\\\\":\\\\\\\"N\\\\\\\",\\\\\\\"expireLink\\\\\\\":\\\\\\\"https:\\/\\/render.alipay.com\\/p\\/f\\/fd-jblxfp45\\/pages\\/home\\/index.html\\\\\\\",\\\\\\\"icon\\\\\\\":\\\\\\\"https:\\/\\/appstoreisvpic.alipayobjects.com\\/prod\\/9332f60a-5e22-4504-9601-a4d434945b1f.png\\\\\\\",\\\\\\\"link\\\\\\\":\\\\\\\"alipays:\\/\\/platformapi\\/startapp?appId=60000081\\\\\\\",\\\\\\\"assistName2\\\\\\\":\\\\\\\"经营信息\\\\\\\",\\\\\\\"assistName3\\\\\\\":\\\\\\\"备注\\\\\\\",\\\\\\\"assistName1\\\\\\\":\\\\\\\"经营数据\\\\\\\",\\\\\\\"subscribeConfig\\\\\\\":\\\\\\\"1\\\\\\\",\\\\\\\"title\\\\\\\":\\\\\\\"支付宝商家服务\\\\\\\",\\\\\\\"templateId\\\\\\\":\\\\\\\"WALLET-FWC@remindDefaultText\\\\\\\",\\\\\\\"content\\\\\\\":\\\\\\\"收款金额￥0.01\\\\\\\",\\\\\\\"linkName\\\\\\\":\\\\\\\"查看该笔收款详情\\\\\\\",\\\\\\\"assistMsg3\\\\\\\":\\\\\\\"用收钱码收钱，安全有保障\\\\\\\",\\\\\\\"assistMsg2\\\\\\\":\\\\\\\"老顾客消费\\\\\\\",\\\\\\\"assistMsg1\\\\\\\":\\\\\\\"今日第4笔收入，共计¥0.04\\\\\\\",\\\\\\\"gmtValid\\\\\\\":2018676150113,\\\\\\\"sceneExt\\\\\\\":{\\\\\\\"sceneTemplateId\\\\\\\":\\\\\\\"WALLET-FWC@remindDefaultText\\\\\\\",\\\\\\\"sceneUrl\\\\\\\":\\\\\\\"alipays:\\/\\/platformapi\\/startApp?appId=2021002117633826\\\\\\\",\\\\\\\"sceneType\\\\\\\":\\\\\\\"miniApp\\\\\\\",\\\\\\\"sceneName\\\\\\\":\\\\\\\"支付宝商家服务\\\\\\\",\\\\\\\"sceneId\\\\\\\":\\\\\\\"2021002117633826\\\\\\\",\\\\\\\"sceneIcon\\\\\\\":\\\\\\\"https:\\/\\/appstoreisvpic.alipayobjects.com\\/prod\\/9332f60a-5e22-4504-9601-a4d434945b1f.png\\\\\\\",\\\\\\\"sceneExtInfo\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"sceneTitle\\\\\\\":\\\\\\\"进入小程序\\\\\\\"},\\\\\\\"homePageTitle\\\\\\\":\\\\\\\"￥0.01收款到账通知\\\\\\\",\\\\\\\"buttonLink\\\\\\\":\\\\\\\"alipays:\\/\\/platformapi\\/startapp?appId=2019101468394439&page=pages%2Fpayment-detail%2Findex%3FrecvPayDirection%3DRECEIVE%26rpRecordId%3D20231220300000016225671240107397%26gmtRecvPay%3D2023-12-20%2015%3A22%3A29\\\\\\\",\\\\\\\"cardAdInfo\\\\\\\":{\\\\\\\"p10\\\\\\\":{\\\\\\\"bizMonitor\\\\\\\":{\\\\\\\"marketingUniqueId\\\\\\\":\\\\\\\"MU3f64557eec244412ac000d0a54fbb8dc\\\\\\\",\\\\\\\"outBizId\\\\\\\":\\\\\\\"-@-@AMG|5|d9cae2938b92445e2823b2bb783ba4eef|6Z2W0e8j6Ysh5ysD02\\\\\\\",\\\\\\\"marketingRuleId\\\\\\\":\\\\\\\"MR25d206aaf84841e4bbb3234442826914\\\\\\\",\\\\\\\"style\\\\\\\":\\\\\\\"recommendAssistLine\\\\\\\",\\\\\\\"marketingItemId\\\\\\\":\\\\\\\"MIc2e3c19ad65e48fd8a88d8e64b471da4\\\\\\\"},\\\\\\\"clientPositionId\\\\\\\":\\\\\\\"p10\\\\\\\",\\\\\\\"expireTime\\\\\\\":1734592950293,\\\\\\\"marketingUniqueId\\\\\\\":\\\\\\\"MU3f64557eec244412ac000d0a54fbb8dc\\\\\\\",\\\\\\\"minClientVersion\\\\\\\":\\\\\\\"10.1.98\\\\\\\",\\\\\\\"recommendTemplateId\\\\\\\":\\\\\\\"recommendAssistLine\\\\\\\",\\\\\\\"viewInfo\\\\\\\":{\\\\\\\"assistMsg\\\\\\\":\\\\\\\"收钱可免费兑2包纸巾\\\\\\\",\\\\\\\"btnBorderColor\\\\\\\":\\\\\\\"#FFAF87\\\\\\\",\\\\\\\"actionType\\\\\\\":\\\\\\\"link\\\\\\\",\\\\\\\"homePageContent\\\\\\\":\\\\\\\"领积分兑好礼\\\\\\\",\\\\\\\"btnText\\\\\\\":\\\\\\\"去看看\\\\\\\",\\\\\\\"btnTextColor\\\\\\\":\\\\\\\"#FF6010\\\\\\\",\\\\\\\"assistMsgColor\\\\\\\":\\\\\\\"#FF6010\\\\\\\",\\\\\\\"actionUrl\\\\\\\":\\\\\\\"alipays:\\/\\/platformapi\\/startapp?appId=2021002117633826&sourceEventId=UT2023101602856590_1.730025a9e5e39&chinfo=ch_ SJFUSY__chsub_jhhtcard\\\\\\\",\\\\\\\"assistName\\\\\\\":\\\\\\\"本次奖励\\\\\\\"}}}}\\\"}\"}"
                        )

    }
}